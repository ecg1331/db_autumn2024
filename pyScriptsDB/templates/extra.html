    {% comment %} {% comment %} {% comment %} function runQueryWithSeason(queryType, season, icon) {
        const metadata = queryMetadata[queryType]; // Get metadata for the query
        const modalTitle = document.getElementById('queryModalLabel');
        const modalIcon = document.getElementById('queryModalIcon');  // This line stays
    
        // Set the modal title and icon dynamically
        modalTitle.textContent = metadata.title;
        updateIconForModal('queryModal', icon || metadata.icon);  // Update icon dynamically
    
        const modalBody = document.getElementById('modalBody');
        modalBody.innerHTML = ''; // Clear any existing content
    
        // Make the fetch request with the season as a query parameter
        fetch(`/run_query/${queryType}?season=${season}`)
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    modalBody.innerHTML = `<p>Error: ${data.error}</p>`;
                } else {
                    let html = '';
                    if (Array.isArray(data)) {
                        if (data.length && typeof data[0] === 'object' && Object.keys(data[0]).length > 1) {
                            html += '<table class="table table-striped"><thead><tr>';
                            Object.keys(data[0]).forEach(column => {
                                html += `<th>${column}</th>`;
                            });
                            html += '</tr></thead><tbody>';
                            data.forEach(row => {
                                html += '<tr>';
                                Object.values(row).forEach(cell => {
                                    html += `<td>${cell !== null && cell !== undefined ? cell : ''}</td>`;
                                });
                                html += '</tr>';
                            });
                            html += '</tbody></table>';
                        } else {
                            html += '<ul class="list-group list-group-flush custom-list-group">';
                            data.forEach(row => {
                                const item = row[Object.keys(row)[0]] || "Unknown Item";
                                html += `<li class="list-group-item">${item}</li>`;
                            });
                            html += '</ul>';
                        }
                    } else {
                        html += `<p>${data}</p>`;
                    }
    
                    modalBody.innerHTML = html;
                }
            })
            .catch(error => {
                console.error("Error fetching data:", error);
                modalBody.innerHTML = `<p>Error fetching data: ${error.message}</p>`;
            });
    
        // Show the query modal
        const modal = new bootstrap.Modal(document.getElementById('queryModal'));
        modal.show();  // Ensure this opens after the season modal closes
        } {% endcomment %} {% endcomment %} {% endcomment %}
        function handleSeasonSubmit(event) {
            event.preventDefault(); // Prevent the form from reloading the page
        
            // Get the season selected by the user
            const seasonInput = document.getElementById('exampleFormControlSelect1').value;
            let season = seasonInput || "Year-Round";  // Default to "Year-Round" if no season is selected
        
            // Close the season input modal after submission
            const modalInstance = bootstrap.Modal.getInstance(document.getElementById('seasonInputModal'));
            modalInstance.hide();
        
            // Call the function to run the query with the selected season and icon
            runQueryWithSeason('query_1', season, 'bi-cup-hot');  // Icon here can be passed dynamically
            }
            // Function to show the season input modal and set the metadata (title/icon)
            function requestSeasonForQuery1() {
                const metadata = queryMetadata['query_1']; // Ensure 'query_1' exists in the metadata object
                const modal = new bootstrap.Modal(document.getElementById('seasonInputModal')); // Show the season input modal
                modal.show();
        
                // Set the modal title and icon dynamically
                const seasonModalTitle = document.getElementById('seasonInputModalLabel');
                seasonModalTitle.textContent = metadata.title;  // Set the title
        
                const seasonModalIcon = document.getElementById('queryModalIcon').querySelector('i');
                seasonModalIcon.className = 'bi ' + metadata.icon; // Set the correct icon for query_1
            }
        
<!-- Modal for Accepting User Input (season) -->
<div class="modal fade" id="seasonInputModal" tabindex="-1" aria-labelledby="seasonInputModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="seasonInputModalLabel" style="flex-grow: 1;">Select Season for Beverage Pairing</h5>
                <div id="queryModalIcon" class="modal-icon">
                    <i class="bi"></i> <!-- Icon will be added dynamically -->    
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="seasonInputForm" method="get" action="/run_query/query_1">
                    <div class="form-group">
                        <label for="seasonSelect">Select a Season</label>
                        <select class="form-control" id="seasonSelect" name="season">
                          <option value="Year-Round">Year-Round</option>
                          <option value="Fall">Fall</option>
                        </select>
                    </div>                    
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>
            </div>
        </div>
    </div>
</div>
            